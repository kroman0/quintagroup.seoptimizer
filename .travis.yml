language: python
python:
  - 2.6
  - 2.7
env:
  - PLONE=4.0
  - PLONE=4.1
  - PLONE=4.2
matrix:
  exclude:
    - python: 2.7
      env: PLONE=4.0
    - python: 2.7
      env: PLONE=4.1
before_install:
  - sudo apt-get install axel
  - pip install http://effbot.org/downloads/Imaging-1.1.6.tar.gz
  - mkdir -p downloads/dist
  - axel -o index http://dist.plone.org/release/$PLONE-latest/
  - cat index | grep "^<a href"|cut -d'"' -f2|while read line; do axel -q -o downloads/dist "http://dist.plone.org/release/4.2-latest/$line" & done
install:
  - python bootstrap.py -c test-$PLONE.x.cfg
  - bin/buildout -Nqc test-$PLONE.x.cfg
script:
  - bin/test
